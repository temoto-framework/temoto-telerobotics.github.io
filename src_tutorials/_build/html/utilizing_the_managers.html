

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utilizing the Managers &mdash; temoto_tutorials  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Writing an Action" href="writing_an_action.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> temoto_tutorials
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="starting_temoto.html">Starting Temoto</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_an_action.html">Writing an Action</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utilizing the Managers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#create-open-the-action-source-file">1) Create/Open the action source file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#include-the-interface-header-file">2) Include the interface header file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-the-manager-interface-object">3) Add the manager interface object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initialize-the-interface">4) Initialize the interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-the-interface">5) Use the interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compile-and-test-the-action">6) Compile and test the action</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">temoto_tutorials</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Utilizing the Managers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/utilizing_the_managers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utilizing-the-managers">
<h1>Utilizing the Managers<a class="headerlink" href="#utilizing-the-managers" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This tutorial assumes that you are familiar with the concept of <a class="reference external" href="../../../temoto-telerobotics.githubub.io/site/concepts/actions">Actions</a> and <a class="reference external" href="../../../temoto-telerobotics.githubub.io/site/p_conceptual_overview.html#managers">Managers</a> in TeMoto.</p>
</div>
<p>Actions can utilize the functionality of any particular manager through its interface. The aim of this tutorial is to show what are the common procedures for setting up and using manager interfaces. As a concrete example, this tutorial shows how to start a camera via <a class="reference external" href="../../../temoto-telerobotics.githubub.io/site/managers/sensor_manager">Sensor Manager</a> interface.</p>
<p>Hence, due the example we are trying to go for, it is required that you have a ROS package that is able to open stream the camera feed. The <a class="reference external" href="http://wiki.ros.org/usb_cam">“usb_cam”</a> package will work just fine. And since TeMoto and its ideas are not de facto standards in the ROS community, you have to add a <a class="reference external" href="../../../temoto-telerobotics.githubub.io/site/concepts/resource_descriptions">sensor descriptor</a> to the “usb_cam” package, which tells what kind of cameras are available and what kind of topics they output.</p>
<div class="section" id="create-open-the-action-source-file">
<h2>1) Create/Open the action source file<a class="headerlink" href="#create-open-the-action-source-file" title="Permalink to this headline">¶</a></h2>
<p>For this particular tutorial we are going to create an action that is verbally invoked by sentence: <em>“Start the camera”</em>. Follow the <a class="reference external" href="/temoto-telerobotics.githubub.io/tutorials/writing_an_action.html">“Writing an Action”</a> tutorial if you are not familiar with the process of creating actions.</p>
<p>Once you have created or located your action, open up the action source file under <em>“src”</em> directory of your action package.</p>
</div>
<div class="section" id="include-the-interface-header-file">
<h2>2) Include the interface header file<a class="headerlink" href="#include-the-interface-header-file" title="Permalink to this headline">¶</a></h2>
<p>In this case include the sensor manager interface header.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;sensor_manager/sensor_manager_interface.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</div>
<div class="section" id="add-the-manager-interface-object">
<h2>3) Add the manager interface object<a class="headerlink" href="#add-the-manager-interface-object" title="Permalink to this headline">¶</a></h2>
<p>Add the sensor manager interface object as a private member of your TeMoto action class:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not forget to add the name of your action as a template parameter: <code class="docutils literal notranslate"><span class="pre">SensorManagerInterface&lt;TaYourActionsName&gt;</span></code></p>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">private</span><span class="o">:</span>

  <span class="c1">// Create sensor manager interface object for accessing sensor manager</span>
  <span class="n">sensor_manager</span><span class="o">::</span><span class="n">SensorManagerInterface</span><span class="o">&lt;</span><span class="n">TaStartCamera</span><span class="o">&gt;</span> <span class="n">smi_</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="initialize-the-interface">
<h2>4) Initialize the interface<a class="headerlink" href="#initialize-the-interface" title="Permalink to this headline">¶</a></h2>
<p>Initialize the interface in your <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">startInterface_x()</span></code> method where “x” denotes the particular Action interface (remember, actions also have interfaces that are unrelated to manager interfaces).</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Initialize the sensor manager interface</span>
<span class="n">smi_</span><span class="p">.</span><span class="n">initialize</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="use-the-interface">
<h2>5) Use the interface<a class="headerlink" href="#use-the-interface" title="Permalink to this headline">¶</a></h2>
<p>This step depends on the particular behaviour you are trying to achieve, hence the following is just an example for acquiring camera resources via sensor manager interface.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// A structure for containing sensor topic related information</span>
<span class="n">SensorTopicsReq</span> <span class="n">requested_topics</span><span class="p">;</span>

<span class="c1">// Specify what kind of topics the sensor should output</span>
<span class="n">requested_topics</span><span class="p">.</span><span class="n">addOutputTopicType</span><span class="p">(</span><span class="s">&quot;camera_data&quot;</span><span class="p">);</span>
<span class="n">requested_topics</span><span class="p">.</span><span class="n">addOutputTopicType</span><span class="p">(</span><span class="s">&quot;camera_info&quot;</span><span class="p">);</span>

<span class="c1">// Debug information</span>
<span class="n">TEMOTO_INFO</span><span class="p">(</span><span class="s">&quot; Starting the camera&quot;</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm"> * Invoke the &quot;startSensor&quot; method. This method requires the type of the sensor (camera)</span>
<span class="cm"> * and will output a structure that maintains the topic names which were received based</span>
<span class="cm"> * on the request</span>
<span class="cm"> */</span>
<span class="n">SensorTopicsRes</span> <span class="n">responded_topics</span> <span class="o">=</span> <span class="n">smi_</span><span class="p">.</span><span class="n">startSensor</span><span class="p">(</span><span class="s">&quot;camera&quot;</span><span class="p">,</span> <span class="n">requested_topics</span><span class="p">);</span>

<span class="c1">// Get the name of the topic where camera feed is published</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">camera_topic</span> <span class="o">=</span> <span class="n">responded_topics</span><span class="p">.</span><span class="n">getOutputTopic</span><span class="p">(</span><span class="s">&quot;camera_data&quot;</span><span class="p">);</span>

<span class="c1">// Debug information</span>
<span class="n">TEMOTO_INFO_STREAM</span><span class="p">(</span><span class="s">&quot;Got camera on topic &#39;&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">camera_topic</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;&#39;&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="compile-and-test-the-action">
<h2>6) Compile and test the action<a class="headerlink" href="#compile-and-test-the-action" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Compile the action.</li>
<li>Test the action by typing <em>“Start the camera”</em> into the temoto termial. Debug informantion is printed out in the terminal where the <em>“temoto_agent”</em> was launched:</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="writing_an_action.html" class="btn btn-neutral" title="Writing an Action" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Robert Valner.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>